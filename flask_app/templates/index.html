{% extends "header.html" %}
{% block content %}
<b>UMD Schedule Builder</b>
<a href="{{ url_for('all_courses', page_num = 1) }}"><h3>See all courses</h3></a>


<body>
    <h1>My Schedule</h1>
    <table border="5" cellspacing="0" align="center">
        <!--<caption>Timetable</caption>-->
        <tr>
            <td align="center" height="50" 
                width="300">
                <b>MONDAY</b>
            </td>
            <td align="center" height="50" 
                width="300">
                <b>TUESDAY</b>
            </td>
            <td align="center" height="50" 
                width="300">
                <b>WEDNESDAY</b>
            </td>
            <td align="center" height="50" 
                width="300">
                <b>THURSDAY</b>
            </td>
            <td align="center" height="50" 
                width="300">
                <b>FRIDAY</b>
            </td>
        </tr>
        <tr>
            <td align="center" height="50" 
                width="300">
                <b>
                    {% for class in schedule.schedule["M"] %}
                        <span style = "color: {{class.color}}; font-size: 150%"> • {{ class.formatted_start_time }} -
                            {{  class.formatted_end_time  }} <br>
                            {{ class.section_id }} </span> <br>
                    {% endfor %}
                </b>
            </td>
            <td align="center" height="50"
                width="300">
                <b>
                    {% for class in schedule.schedule["Tu"] %}
                        <span style = "color: {{class.color}}; font-size: 150%"> • {{ class.formatted_start_time }} -
                            {{  class.formatted_end_time  }} <br>
                            {{ class.section_id }} </span> <br>
                    {% endfor %}
                </b>
            </td>
            <td align="center" height="50"
                width="300">
                <b>
                    {% for class in schedule.schedule["W"] %}
                        <span style = "color: {{class.color}}; font-size: 150%"> • {{ class.formatted_start_time }} -
                            {{  class.formatted_end_time  }} <br>
                            {{ class.section_id }} </span> <br>
                    {% endfor %}
                </b>
            </td>
            <td align="center" height="50"
                width="300">
                <b>
                    {% for class in schedule.schedule["Th"] %}
                        <span style = "color: {{class.color}}; font-size: 150%"> • {{ class.formatted_start_time }} -
                            {{  class.formatted_end_time  }} <br>
                            {{ class.section_id }} </span> <br>
                    {% endfor %}
                </b>
            </td>
            <td align="center" height="50"
                width="300">
                <b>
                    {% for class in schedule.schedule["F"] %}
                        <span style = "color: {{class.color}}; font-size: 150%"> • {{ class.formatted_start_time }} -
                            {{  class.formatted_end_time  }} <br>
                            {{ class.section_id }} </span> <br>
                    {% endfor %}
                </b>
            </td>
        </tr>

    </table>
</body>


<div class="container">
    {% for warning in schedule.warnings_list %}
        <h3 style="color:red;"> • WARNING: {{ warning.warning_text }} </h3>
    {% endfor %}
</div>

<div class="container">
    <br>
    <h3>Add a section to schedule</h3>
    <p>Enter course code and section number</p>
    <p>E.G: CMSC131-0101 (Department Name: CMSC131, Section Number: 0101)</p>
</div>
<div class="container">
    <form action="/" class="form-inline my-2 my-lg-0" method="POST">
        {{ add_remove_form.csrf_token }}
        {{ add_remove_form.course_query(class="form-control", placeholder="ABCD100") }}

        {% if add_remove_form.course_query.errors %}
        <div class="alert alert-warning" role="alert">
            {% for error in add_remove_form.course_query.errors %}
                <span>{{ error }}</span>
            {% endfor %}
        </div>
        {% endif %}

        <b>-</b>

        {{ add_remove_form.csrf_token }}
        {{ add_remove_form.section_query(class="form-control", placeholder="0101") }}

        {% if add_remove_form.section_query.errors %}
        <div class="alert alert-warning" role="alert">
            {% for error in add_remove_form.section_query.errors %}
                <span>{{ error }}</span>
            {% endfor %}
        </div>
        {% endif %}
        {{ add_remove_form.add(class="btn btn-outline-success") }}
        {{ add_remove_form.remove(class="btn btn-outline-danger") }}
    </form>
    <b> {{ add_remove_notification_text }} </b>
</div>

<div class="container">
    <br>
    <h3>Search for a course</h3>
    <p>Enter course code: e.g. CMSC131</p>
</div>
<div class="container">
    <form action="/" class="form-inline my-2 my-lg-0" method="POST">
        {{ search_for_sections_of_course_form.csrf_token }}
        {{ search_for_sections_of_course_form.search_query(class="form-control", placeholder="CMSC131") }}
        {{ search_for_sections_of_course_form.search_for_course(class="btn btn-outline-success") }}
    </form>
    {% if course_to_display %}
        <div class="scrollablesections" style="height: 20%; overflow-y: scroll;">
            {% for section_num, section in course_to_display.sections.items() %}
                <h4> {{section.section_id}} </h4>
                    {{section.open_seats}} out of {{section.total_seats}} seats available <br>
                    {% for professor in section.professor %}
                        {{ professor }} <br>
                    {% endfor %}

                    {%for times, day in section.get_formatted_weekly_schedule().items() %}
                         <ul>{{day}}: {{times}}</ul>
                    {% endfor %}
            <form action="/" method="POST">
                 {{ add_class_form.csrf_token }}
                 <input type="submit" name="course" value="Add {{section.section_id}}">
            </form>
            {% endfor %}
        </div>
    {% endif %}
</div>

<div class="container">
    <h2>Remove all courses from schedule</h2>
</div>
<div class="container">
    <form action="/" method="POST">
        {{ clear_all_courses_form.csrf_token }}
        {{ clear_all_courses_form.clear_all(class="btn btn-outline-danger") }}

        {% if clear_all_courses_form.clear_all.errors %}
        <div class="alert alert-warning" role="alert">
            {% for error in clear_all_courses_form.clear_all.errors %}
                <span>{{ error }}</span>
            {% endfor %}
        </div>
        {% endif %}

    </form>
</div>

{% endblock %}
